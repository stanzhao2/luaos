# luaos

***让你用lua编写服务器程序变得更简单***

一个进程下可以载入多个lua模块，每个模块运行在自己独立的lua虚拟机下，模块间通过订阅/发布机制传递消息
系统内置socket，timeingwheel，storage，方便实现网络，定时器等任务

luaos启动后默认加载lua/main.lua 或者 lua/main/init.lua 文件作为启动文件，如果该 lua 文件有 main 函数，则启动后自动调用该函数

luaos可以对所有的 lua 文件进行编译打包，生成 rom 文件，该 rom 文件可以被 luaos 直接执行 （原始文件可以在发布时删除，避免代码泄露）。编译命令为：luaos xxx.rom -c，编译后会在进程目录下生成 xxx.rom 文件，运行该 rom 时可以执行 luaos xxx.rom 即可

**这里要注意，rom文件里的代码是编译且加密的，无法还原成源代码**

lua文件存在加载顺序，同名文件优先从 lua 目录加载，如果不存在则从 usr 目录加载，如果依然失败则会从指定的 rom 中加载（如果指定了 rom 文件）
顺序如下：
1. lua目录  用于存放用户编写的 lua 脚本文件
2. usr目录  用于存放系统提供的 lua 脚本文件
3. rom文件  编译并打包后的 rom 文件

如果需要使用 lua C 扩展库，可以将 so 文件存放在两个目录下，其中 sys 目录用于存放系统使用的扩展库（不建议存放其他文件），ext目录存放用户使用的扩展库。
